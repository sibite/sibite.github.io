(()=>{"use strict";function t(t,s,e){return{configurable:e.configurable,enumerable:e.enumerable,get(){return e.value.bind(this)}}}class s{constructor(t){this.createHostElement(t)}createHostElement(t=""){const s=document.createElement("template");s.innerHTML=t;const e=s.content.firstElementChild;e instanceof HTMLElement?this.hostEl=e:this.hostEl=s}appendTo(t){t.append(this.hostEl)}}class e extends s{constructor(){super('<div class="stopwatch__time-display"> <p class="stopwatch__time-display-text" id="js-time-display-text"></p> </div>'),this.textEl=this.hostEl.querySelector("#js-time-display-text"),this.onInit()}onInit(){this.render(0)}render(t){const s=this.getTimeStructure(Math.abs(t)),e=-1===Math.sign(t)?"-":"",n=this.getTimeFullText(s);this.textEl.textContent=n,this.updateDisplayStyle(e)}updateDisplayStyle(t){"-"===t?this.hostEl.classList.add("stopwatch__time-display--countdown"):this.hostEl.classList.remove("stopwatch__time-display--countdown")}getTimeStructure(t){const s=new Date(t);return{hours:Math.floor(t/36e5),minutes:s.getMinutes(),seconds:s.getSeconds(),centiseconds:Math.floor(s.getMilliseconds()/10)}}getTimeFullText(t){const s=t.centiseconds.toString().padStart(2,"0"),e=`${t.seconds.toString().padStart(2,"0")}.`,n=`${t.minutes.toString().padStart(2,"0")}:`;let o;return o=t.hours>0?`${t.hours}:`:"",o+n+e+s}}var n=function(t,s,e,n){var o,i=arguments.length,a=i<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,s,e,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(i<3?o(a):i>3?o(s,e,a):o(s,e))||a);return i>3&&a&&Object.defineProperty(s,e,a),a};class o extends s{constructor(t,s){super('<div class="stopwatch__toolbar"> <div class="stopwatch__controls"> <button class="button" type="button" id="pick-countdown"> <i class="button__icon icon-ic_fluent_time_picker_24_filled" Title="Pause"></i> </button> <button class="button" type="button" id="pause"> <i class="button__icon icon-ic_fluent_pause_24_filled" Title="Pause"></i> </button> <button class="button button--state-success" type="button" id="start"> <i class="button__icon icon-ic_fluent_play_24_filled" Title="Pause"></i> </button> <button class="button button--state-danger" type="button" id="stop"> <i class="button__icon icon-ic_fluent_stop_24_filled" Title="Pause"></i> </button> </div> <div class="stopwatch__countdowns-wrapper stopwatch__countdowns-wrapper--hidden"> <div class="stopwatch__countdowns"> </div> </div> </div>'),this.subscriptions=t,this.startBtn=this.hostEl.querySelector("#start"),this.pauseBtn=this.hostEl.querySelector("#pause"),this.stopBtn=this.hostEl.querySelector("#stop"),this.pickCountdownBtn=this.hostEl.querySelector("#pick-countdown"),this.controlsToolbar=this.hostEl.querySelector(".stopwatch__controls"),this.coutdownsToolbar=this.hostEl.querySelector(".stopwatch__countdowns"),this.coutdownsToolbarWrapper=this.hostEl.querySelector(".stopwatch__countdowns-wrapper"),this.isInPlayingMode=!1,this.addPointerListeners(),this.addKeyboardListener(),this.removeWhitespaces(),this.appendCountdownButtons(s),this.setInitialButtonsVisibility()}appendCountdownButtons(t){t.forEach((t=>{const s=document.createElement("button");s.classList.add("button"),s.id=`countdown-${t}`,s.textContent=`${t}s`,s.onpointerup=()=>this.onCountdownOptionPicked(t),this.coutdownsToolbar.appendChild(s)}))}removeWhitespaces(){this.controlsToolbar.childNodes.forEach((t=>{t.nodeType===Node.TEXT_NODE&&this.controlsToolbar.removeChild(t)}))}setInitialButtonsVisibility(){this.hideButton(this.stopBtn),this.hideButton(this.pauseBtn),this.unhideButton(this.pickCountdownBtn),this.unhideButton(this.startBtn)}addPointerListeners(){this.startBtn.onpointerup=this.onStartClick,this.pauseBtn.onpointerup=this.onPauseClick,this.stopBtn.onpointerup=this.onStopClick,this.pickCountdownBtn.onpointerup=this.onCountdownPickClick}addKeyboardListener(){window.onkeypress=t=>{" "===t.key&&(t.preventDefault(),this.isInPlayingMode?this.onPauseClick():this.onStartClick())}}hideButton(t){t.classList.add("button--hidden"),t.classList.remove("button--disabled")}unhideButton(t){t.classList.remove("button--hidden")}disableButton(t){t.classList.add("button--disabled"),t.classList.remove("button--hidden")}enableButton(t){t.classList.remove("button--disabled")}onStartClick(){this.subscriptions.start(),this.coutdownsToolbarWrapper.classList.add("stopwatch__countdowns-wrapper--hidden"),this.unhideButton(this.pauseBtn),this.enableButton(this.pauseBtn),this.hideButton(this.stopBtn),this.hideButton(this.pickCountdownBtn),this.hideButton(this.startBtn),this.isInPlayingMode=!0}onPauseClick(){this.subscriptions.pause(),this.disableButton(this.pauseBtn),this.unhideButton(this.stopBtn),this.unhideButton(this.startBtn),this.isInPlayingMode=!1}onStopClick(){this.subscriptions.stop(),this.setInitialButtonsVisibility(),this.isInPlayingMode=!1}onCountdownPickClick(){this.coutdownsToolbarWrapper.classList.toggle("stopwatch__countdowns-wrapper--hidden")}onCountdownOptionPicked(t){this.subscriptions.setCountdown(t)}}n([t],o.prototype,"onStartClick",null),n([t],o.prototype,"onPauseClick",null),n([t],o.prototype,"onStopClick",null),n([t],o.prototype,"onCountdownPickClick",null),n([t],o.prototype,"onCountdownOptionPicked",null);var i=function(t,s,e,n){var o,i=arguments.length,a=i<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,s,e,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(i<3?o(a):i>3?o(s,e,a):o(s,e))||a);return i>3&&a&&Object.defineProperty(s,e,a),a};class a extends s{constructor(){super('<div class="stopwatch"></div>'),this.timeDisplay=new e,this.toolbar=new o({start:this.start,pause:this.pause,stop:this.stop,setCountdown:this.setCountdown},[0,2,5,10,30]),this.running=!1,this.countdown=0,this.elapsedTime=0,this.lastStartTimestamp=0,this.onInit()}onInit(){this.appendDisplay(),this.appendToolbar()}appendDisplay(){this.timeDisplay.appendTo(this.hostEl)}appendToolbar(){this.toolbar.appendTo(this.hostEl)}getElapsedTimeToNow(){const t=Date.now()-this.lastStartTimestamp;return this.elapsedTime+t}start(){this.running||(this.running=!0,this.lastStartTimestamp=Date.now(),requestAnimationFrame(this.step))}pause(){this.running&&(this.elapsedTime=this.getElapsedTimeToNow(),this.running=!1)}stop(){this.elapsedTime=this.countdown,this.running=!1,this.step()}setCountdown(t){if(this.running||this.elapsedTime>0)return;const s=1e3*-t;this.elapsedTime=s,this.countdown=s,this.step()}step(){this.running?(this.timeDisplay.render(this.getElapsedTimeToNow()),requestAnimationFrame(this.step)):this.timeDisplay.render(this.elapsedTime)}}i([t],a.prototype,"start",null),i([t],a.prototype,"pause",null),i([t],a.prototype,"stop",null),i([t],a.prototype,"setCountdown",null),i([t],a.prototype,"step",null);const l=document.getElementById("app");function r(){l.style.minHeight=`${window.innerHeight}px`}r(),window.addEventListener("resize",r),(new a).appendTo(l)})();